<!DOCTYPE html>
<html lang="en" xmlns:th="htttp://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>HON • Review Report</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">

    <style>
        :root{
     --bg:#f6f7fb;
     --panel:#ffffff;
     --panel-2:#f1f2f7;
     --text:#1c1c24;
     --muted:#6b6f85;

     --theme-orange:#F73B20;
     --theme-orange-10: rgba(247, 59, 32, 0.10);
     --theme-orange-20: rgba(247, 59, 32, 0.20);

     --radius:16px;
   }

   *{
     box-sizing:border-box;
     margin:0;
     padding:0;
   }

   html,body{
     width:100%;
     overflow-x:hidden;
   }

   body{
     background:var(--bg);
     font-family:Inter,system-ui,sans-serif;
     color:var(--text);
     padding:24px;
   }

   /* ===== CONTAINER ===== */
   .container{
     max-width:1100px;
     margin:auto;
   }

   /* ===== HEADER ===== */
   .header{
     display:flex;
     justify-content:space-between;
     align-items:center;
     gap:12px;
     flex-wrap:wrap;
     margin-bottom:20px;
   }

   .header h1{
     font-size:1.4rem;
   }

   .status-badge{
     padding:8px 14px;
     border-radius:20px;
     font-size:.75rem;
     font-weight:600;
     background:var(--theme-orange-10);
     color:var(--theme-orange);
   }

   /* ===== GRID ===== */
   .grid{
     display:grid;
     grid-template-columns:1fr 1.3fr;
     gap:20px;
   }

   /* ===== PANEL ===== */
   .panel{
     background:var(--panel);
     border-radius:var(--radius);
     padding:20px;
     border:1px solid #e6e8f0;
   }

   .panel h2{
     font-size:1.05rem;
     margin-bottom:12px;
     color:var(--theme-orange);
   }

   /* ===== INFO ROW ===== */
   .info-row{
     display:flex;
     justify-content:space-between;
     gap:12px;
     margin-bottom:8px;
     font-size:.85rem;
   }

   .info-row span{
     color:var(--muted);
     white-space:nowrap;
   }

   /* ===== DECISION ===== */
   .decision textarea{
     width:100%;
     min-height:90px;
     border-radius:12px;
     border:1px solid #ddd;
     padding:10px;
     font-family:inherit;
     resize:none;
     margin-bottom:14px;
   }

   /* ===== ACTION BUTTONS ===== */
   .actions{
     display:flex;
     gap:10px;
     flex-wrap:wrap;
   }

   .btn{
     padding:10px 16px;
     border-radius:12px;
     border:none;
     cursor:pointer;
     font-weight:600;
     font-size:.8rem;
     transition:.2s;
   }

   .btn.warn{
     background:rgba(255,176,32,0.2);
     color:#b67800;
   }

   .btn.block{
     background:var(--theme-orange-20);
     color:var(--theme-orange);
   }

   .btn.reject{
     background:#eee;
     color:#444;
   }

   .btn:hover{
     transform:translateY(-1px);
   }

   /* ===== RESPONSIVE ===== */

   @media(max-width:900px){
     .grid{
       grid-template-columns:1fr;
     }
   }

   @media(max-width:600px){
     body{
       padding:14px;
     }

     .header h1{
       font-size:1.2rem;
     }

     .actions .btn{
       width:100%;
     }
   }



           /* for warning popup*/

      /* ========== OVERLAY ========== */
   .confirm-overlay {
       position: fixed;
       inset: 0;
       background: rgba(15, 23, 42, 0.45);
       display: none;
       align-items: center;
       justify-content: center;
       z-index: 9999;
       backdrop-filter: blur(6px);
   }

   /* ========== MODAL BOX ========== */
   .confirm-box {
       width: min(420px, 92%);
       background: #ffffff;
       border-radius: 18px;
       padding: 24px 26px;
       box-shadow: 0 25px 50px rgba(0, 0, 0, 0.18);
       animation: scaleIn 0.25s ease;
       border: 1px solid rgba(247, 59, 32, 0.15);
   }

   /* ========== TITLE ========== */
   .confirm-box h3 {
       margin: 0 0 10px;
       font-size: 1.35rem;
       font-weight: 700;
       color: #1c1c24;
   }

   /* ========== TEXT ========== */
   .confirm-box p {
       margin: 8px 0;
       font-size: 0.95rem;
       line-height: 1.55;
       color: #555;
   }

   /* Highlight text */
   .confirm-box p strong {
       color: #F73B20;
   }

   /* ========== ACTIONS ========== */
   .confirm-actions {
       display: flex;
       justify-content: flex-end;
       gap: 12px;
       margin-top: 22px;
       flex-wrap: wrap;
   }

   /* ========== BUTTON BASE ========== */
   .confirm-actions .btn {
       padding: 10px 18px;
       border-radius: 12px;
       font-size: 0.9rem;
       font-weight: 600;
       cursor: pointer;
       border: none;
       transition: all 0.2s ease;
   }

   /* Cancel */
   .confirm-actions .btn.cancel {
       background: #f1f2f7;
       color: #444;
   }

   .confirm-actions .btn.cancel:hover {
       background: #e4e6ee;
   }

   /* Warning / Danger */
   .confirm-actions .btn.danger {
       background: linear-gradient(135deg, #F73B20, #ff5238);
       color: #ffffff;
       box-shadow: 0 8px 20px rgba(247, 59, 32, 0.35);
   }

   .confirm-actions .btn.danger:hover {
       transform: translateY(-2px);
       box-shadow: 0 12px 26px rgba(247, 59, 32, 0.45);
   }

   /* ========== ANIMATION ========== */
   @keyframes scaleIn {
       from {
           opacity: 0;
           transform: scale(0.92);
       }
       to {
           opacity: 1;
           transform: scale(1);
       }
   }

   /* ========== MOBILE OPTIMIZATION ========== */
   @media (max-width: 600px) {
       .confirm-box {
           padding: 20px;
       }

       .confirm-actions {
           flex-direction: column;
       }

       .confirm-actions .btn {
           width: 100%;
           text-align: center;
       }
   }

    </style>
</head>
<body>

<div class="container">

    <div class="header">
        <h1>Review Report</h1>
        <div class="status-badge">IN REVIEW</div>
    </div>

    <div class="grid">

        <!-- Report Summary -->
        <div class="panel">
            <h2>Report Summary</h2>

            <div class="info-row"><span>Type</span><strong>User Report</strong></div>
            <div class="info-row"><span>Reported User</span><strong th:text="${owner.username}">@unknown_soul</strong></div>
            <div class="info-row"><span>Reported By</span><strong th:text="${reporter.username}">@elara</strong></div>
            <div class="info-row"><span>Reason</span><strong th:text="${report.reason}">Harassment</strong></div>
            <div class="info-row"><span>Reported On</span><strong th:text="${report.dateTime}">12 Aug 2025 • 10:32 PM</strong></div>
            <div class="info-row"><span>Previous Reports</span><strong th:text="${totalCount}">4</strong></div>
        </div>

        <!-- Evidence + Decision -->
        <div class="panel">
<!--            <h2>Chat Evidence</h2>-->
<!--            <div class="chat-box">-->
<!--                <div class="msg"><strong>@elara:</strong> please stop messaging me</div>-->
<!--                <div class="msg"><strong>@unknown_soul:</strong> nobody wants you here</div>-->
<!--                <div class="msg flagged"><strong>@unknown_soul:</strong> you are useless</div>-->
<!--            </div>-->

            <div class="decision">
                <h2>Admin Decision</h2>
                <textarea placeholder="Add admin note (mandatory)"></textarea>

                <div class="actions">

                    <form id="warningMailId" method="post" th:action="@{/warningMail}" >
                       <button type="button" class="btn warn" onclick="openFinalWarningEmailModal()">Warn User</button>
                    </form>
<!--                        <a th:href="@{/warningMail}"><button class="btn warn">Warn User</button></a>-->


                    <form method="post" th:action="@{/blockReportedUser}">
                        <button class="btn block">Block User</button>
                    </form>
<!--                    <button class="btn delete">Delete Chat</button>-->
                    <form id="rejectReportId" method="post" th:action="@{/rejectReportWarning}" >
                        <button type="button" class="btn reject" onclick="openRejectReportConfirmModal()">Reject Report</button>
                    </form>

                </div>
            </div>


        </div>


    </div>
</div>

<!-- Final Warning Email Confirmation Modal -->
<div class="confirm-overlay" id="finalWarningEmailModal">
    <div class="confirm-box">
        <h3>Send Final Warning Email?</h3>

        <p>
            This action will send a <strong>final warning email</strong>
            to the reported user.
        </p>

        <p style="color:#b91c1c; font-weight:500;">
            If another report is received after this email,
            the user’s account may be permanently suspended or deleted.
        </p>

        <div class="confirm-actions">
            <button class="btn cancel" onclick="closeFinalWarningEmailModal()">
                Cancel
            </button>

            <button class="btn danger" onclick="confirmSendFinalWarningEmail()">
                Send Warning Email
            </button>
        </div>
    </div>
</div>

<!-- Reject Report Confirmation Modal -->
<div class="confirm-overlay" id="rejectReportConfirmModal">
    <div class="confirm-box">
        <h3>Reject This Report?</h3>

        <p style="color:#fca5a5; font-weight:500;">
            This action is <strong>permanent</strong>.
        </p>

        <p>
            If you reject this report, it will be
            <strong>deleted permanently</strong> from the system.
        </p>

        <p style="color:#cbd5e1;">
            This action <strong>cannot be undone</strong>.
        </p>

        <div class="confirm-actions">
            <button class="btn cancel" onclick="closeRejectReportConfirmModal()">
                Cancel
            </button>

            <button class="btn danger" onclick="confirmRejectReport()">
                Reject & Delete Report
            </button>
        </div>
    </div>
</div>

<!--for lasts warning-->
<script>
    function openFinalWarningEmailModal(){
    document.getElementById("finalWarningEmailModal").style.display="flex";
    }

    function closeFinalWarningEmailModal(){
    document.getElementById("finalWarningEmailModal").style.display="none";
    }

    function confirmSendFinalWarningEmail(){
    document.getElementById("warningMailId").submit();
    }
</script>

<!--for rejecting report.-->
<script>
    function openRejectReportConfirmModal(){
    document.getElementById("rejectReportConfirmModal").style.display="flex";
    }
    function closeRejectReportConfirmModal(){
     document.getElementById("rejectReportConfirmModal").style.display="none";
    }

    function confirmRejectReport(){
    document.getElementById("rejectReportId").submit();
    }
</script>

</body>
</html>
